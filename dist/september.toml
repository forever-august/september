# HTTP server configuration
[http]
host = "127.0.0.1"
port = 3000

# TLS Configuration - HTTPS enabled by default via ACME (Let's Encrypt)
#
# September uses ACME by default for automatic TLS certificate provisioning.
# You MUST configure acme_domains and acme_email for production use, OR
# explicitly disable TLS with mode = "none" for development.
#
# Three modes are available:
#   - "acme" (default): Automatic Let's Encrypt certificates
#   - "manual": User-provided certificate and key files
#   - "none": Plain HTTP (explicit opt-out, for development/reverse proxy)
[http.tls]
# Disable TLS for local development
mode = "none"

# --- ACME mode (Let's Encrypt) - recommended for production ---
# Uncomment and configure for automatic HTTPS:
# mode = "acme"
# acme_domains = ["example.com", "www.example.com"]
# acme_email = "admin@example.com"
# acme_production = true  # false = staging (for testing, certs not trusted)
# acme_cache_dir = "./acme-cache"  # Where to store certificates

# --- Manual mode - use existing certificates ---
# mode = "manual"
# cert_path = "/etc/ssl/certs/september.pem"
# key_path = "/etc/ssl/private/september.key"
# Note: Send SIGHUP to reload certificates without restart

# --- HTTP redirect (when TLS enabled) ---
# redirect_http = true   # Redirect HTTP to HTTPS (default: true)
# redirect_port = 80     # Port for HTTP redirect listener (default: 80)

# Global NNTP settings
[nntp]
timeout_seconds = 30
request_timeout_seconds = 30
threads_per_page = 25
articles_per_page = 20
# max_articles_per_group = 500  # Maximum articles fetched per group

# NNTP servers (federated pool - tried in order)
# [[server]]
# name = "olduse"
# host = "olduse.net"
# port = 11940
# worker_count = 4
# timeout_seconds = 30           # Override global connection timeout
# request_timeout_seconds = 30   # Override global request timeout
# Optional authentication (requires TLS unless allow_insecure_auth = true)
# username = "myuser"
# password = "mypassword"
# allow_insecure_auth = false  # DANGER: allows plaintext auth (testing only)

# Uncomment to add additional servers for fallback
[[server]]
name = "lore"
host = "nntp.lore.kernel.org"
port = 119
worker_count = 2

[ui]
# site_name defaults to the first server name if not set
site_name = "September NNTP Gateway"
collapse_threshold = 5

[cache]
article_ttl_seconds = 3600     # 1 hour - allows date_relative to stay fresh
threads_ttl_seconds = 300      # 5 minutes
groups_ttl_seconds = 3600      # 1 hour
max_articles = 10000
max_thread_lists = 100
# max_group_stats = 1000         # Maximum cached group stats entries

# Logging configuration
[logging]
# Log format: "text" (human-readable, default) or "json" (structured for production)
format = "json"

# Theme configuration
[theme]
# Active theme name (default: "default")
name = "default"
# Base directory containing themes
# Production: "/usr/share/september/themes" (default)
# Development: "dist/themes"
themes_dir = "dist/themes"

# OpenID Connect authentication (optional)
# Enables login via OAuth2/OIDC providers (Google, GitHub, etc.)
#
# [oidc]
# cookie_secret = "your-secret-here-64-chars-minimum-recommended"
#                                    # Secret for signing session cookies (64+ chars)
#                                    # Supports: env:VAR_NAME, file:/path, or literal
# session_lifetime_days = 30         # Session duration (default: 30)
# redirect_uri_base = "https://example.com"  # Optional: override auto-detected base URL
#
# --- OIDC Discovery mode (recommended for Google, Microsoft, etc.) ---
# [[oidc.provider]]
# name = "google"                    # URL-safe identifier (used in /auth/login/google)
# display_name = "Google"            # Shown on login page
# issuer_url = "https://accounts.google.com"
# client_id = "your-client-id"
# client_secret = "env:GOOGLE_CLIENT_SECRET"  # Supports env:/file:/literal
#
# --- Manual OAuth2 mode (for GitHub, etc. that don't support OIDC discovery) ---
# [[oidc.provider]]
# name = "github"
# display_name = "GitHub"
# auth_url = "https://github.com/login/oauth/authorize"
# token_url = "https://github.com/login/oauth/access_token"
# userinfo_url = "https://api.github.com/user"
# userinfo_sub_field = "id"          # GitHub uses "id" instead of "sub" (default: "sub")
# client_id = "your-client-id"
# client_secret = "env:GITHUB_CLIENT_SECRET"
