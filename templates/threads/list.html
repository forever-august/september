{% extends "base.html" %}

{% block title %}{{ group }} - {{ config.site_name }}{% endblock %}

{% block content %}
<div class="group-header">
    <div class="group-header-top">
        <h1>{{ group }}</h1>
        {% if user and can_post %}
        <a href="/g/{{ group }}/compose" class="new-post-button">New Post</a>
        {% endif %}
    </div>
    <p class="thread-count">{{ pagination.total_items }} threads</p>
</div>

{% if pagination.total_pages > 1 %}
{% include "partials/pagination.html" %}
{% endif %}

<div class="thread-list">
    {% for thread in threads %}
    <a href="{% if thread.article_count == 1 %}/a/{{ thread.root_message_id | urlencode_strict }}?back=/g/{{ group }}{% else %}/g/{{ group }}/thread/{{ thread.root_message_id | urlencode_strict }}{% endif %}" class="thread-card-link">
        <div class="thread-card">
            <div class="thread-content">
                <h2 class="thread-title">{{ thread.subject }}</h2>
                <div class="thread-meta">
                    {% if thread.root.article %}
                    <span class="author">{{ thread.root.article.from }}</span>
                    <span class="separator">·</span>
                    <span class="date">{{ thread.root.article.date | timeago }}</span>
                    {% endif %}
                </div>
                <div class="thread-footer">
                    <span class="reply-count">{{ thread.article_count - 1 }} replies</span>
                    {% if thread.last_post_date %}
                    <span class="separator">·</span>
                    <span class="last-activity">most recent {{ thread.last_post_date | timeago }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </a>
    {% else %}
    <div class="empty-state">
        <p>No threads found in this group.</p>
    </div>
    {% endfor %}
</div>

{% if pagination.total_pages > 1 %}
{% include "partials/pagination.html" %}
{% endif %}
{% endblock %}
