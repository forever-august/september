# September configuration for integration tests
# Connects to test NNTP server and Dex OIDC provider

[http]
host = "0.0.0.0"
port = 3000

# NNTP settings - shorter timeouts for testing
[nntp]
timeout_seconds = 10
request_timeout_seconds = 10

[nntp.defaults]
threads_per_page = 10
articles_per_page = 10

# Connect to the Renews NNTP server in Docker
[[server]]
name = "test"
host = "nntp"
port = 119
worker_count = 2
username = "testposter"
password = "testpassword"
allow_insecure_auth = true  # Allow plaintext auth in test environment

[ui]
site_name = "September Test"
collapse_threshold = 3

# Shorter cache TTLs for testing
[cache]
article_ttl_seconds = 60
threads_ttl_seconds = 10
groups_ttl_seconds = 30
max_articles = 100
max_thread_lists = 10

# Logging - JSON format for structured log capture in tests
[logging]
format = "json"

# OIDC configuration - connects to Dex
[oidc]
cookie_secret = "env:OIDC_COOKIE_SECRET"
session_lifetime_days = 1

[[oidc.provider]]
name = "testidp"
display_name = "Test Login"
issuer_url = "http://dex:5556/dex"
client_id = "september-test"
client_secret = "september-test-client-secret"
